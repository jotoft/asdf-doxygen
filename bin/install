#!/usr/bin/env bash

set -euo pipefail

install_doxygen() {
  local install_type=$1
  local version=$2
  local install_path=$3
  local download_path=$4

  if [ "$install_type" != "version" ]; then
    echo "Only version installs are supported"
    exit 1
  fi

  echo "Building doxygen ${version}..."
  cd "${download_path}"
  mkdir -p build
  cd build
  cmake -G "Unix Makefiles" -DCMAKE_INSTALL_PREFIX="${install_path}" ..
  make -j$(nproc)
  make install

  echo "doxygen ${version} installed successfully!"
}

install_doxygen "$ASDF_INSTALL_TYPE" "$ASDF_INSTALL_VERSION" "$ASDF_INSTALL_PATH" "$ASDF_DOWNLOAD_PATH"
